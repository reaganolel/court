!function(e){"use strict";var t=null,a=e('input[name="amount"]'),n=[];e("form input").focusout(function(){h(e(this))}),e("form select").change(function(){h(e(this))}),e("form textarea").focusout(function(){h(e(this))});var o=function(e){return parseInt(e,10)},i=function(){e("#order-email-quote").next("span").toggleClass("disabled",!/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+(\.)+([a-zA-Z0-9]{2,63})+$/.test(e("#order-email-quote").val())||e("#order-email-quote").val().split("@").length>2)},r=1;e(document).on("click",".navbar-toggle",function(){e("body").toggleClass("xs-overflow-hidden")}).ready(i).ready(function(){var t=e(".gallery");if(0!==t.length){t.find("br").remove();var a=t.find("img").length,n=t.html();t.show().append('<button class="left"><i class="fa fa-angle-left"></i></button>','<button class="right"><i class="fa fa-angle-right"></i></button>','<div class="cover-block"></div>').after('<div class="gallery-thumbs">'+n+'<button class="left"><i class="fa fa-angle-left"></i></button><button class="right"><i class="fa fa-angle-right"></i></button></div>'),t.find("dl").each(function(t){e(this).find("dd").append('<span class="gallery-count">'+o(t+1)+"/"+a+"</span>")}),e(".gallery-thumbs").show(),t.height(t.find("img").first().height())}}).on("click",".gallery-thumbs a",function(t){t.preventDefault(),r=e(this).closest("dl").index()+2;e(this).closest(".gallery-thumbs").prev(".gallery").find(".left").trigger("click")}).on("click",".gallery-thumbs button",function(){var t=e(".gallery-thumbs"),a=t.find("dl"),n="-";e(this).hasClass("left")&&(n="+");var i=a.first(),r=i.css("marginLeft").replace("px",""),l=0;a.each(function(){l=l+e(this).width()+o(e(this).css("marginRight"))}),l-=t.width(),r>=-100&&"+"===n?i.css("marginLeft","0px"):r<=-1*l+100&&"-"===n?i.css("marginLeft","-"+l+"px"):i.css("marginLeft",n+"=100px")}).on("click",".gallery button",function(){var t=e(this).closest(".gallery"),a=t.find("dl");if(!(r===a.length&&e(this).hasClass("right")||1===r&&e(this).hasClass("left"))){e(this).hasClass("right")?r++:r--;for(var n=0,o=1;o<r;o++)n+=a.eq(o).width();a.first().css("marginLeft","-"+n+"px"),t.height(a.eq(r-1).height())}}).on("input","#order-email-quote",function(){i()}).on("click",".get-quote-mail",function(){e(this).hasClass("disabled")||(e("#mailsuccess").fadeOut(500,function(){e("#mailsuccess").html('<span style="color: #00735a;font-size: 18px;display: block;"><i style="margin-right: 10px" class="fa fa-check-circle"></i> Mail Sent</span>').fadeIn(500)}),e.ajax({method:"post",dataType:"json",url:AjaxURL+"/send-quote.php",data:{email:e("#order-email-quote").val(),ppl:e("#total-ppl-calc").val(),price:e("#total-price-calc").val(),litres:e("#total-litres-calc").val(),product:e("#order-product").val()}}))}).on("click",".article-opinion .btn",function(){var t=e(this),a=t.hasClass("btn-no")?"no":"yes";if(1===e("#feedback-text").length&&(a=e("#feedback-text").val()),"yes"===a||1===e("#feedback-text").length)e.ajax({method:"post",dataType:"json",url:AjaxURL+"/feedback.php",data:{feedback:a,postId:postIdVar}}).done(function(e){t.closest(".feedback-replace").html(e)});else{var n='Sorry how could we improve?<br><textarea class="form-control" id="feedback-text" maxlength="200"></textarea><br><button class="btn btn-lime btn-3D" id="submit-feedback">Submit</button>';t.closest(".feedback-replace").html(n)}}).ready(function(){if("undefined"!=typeof preApplyFilters&&!e.isEmptyObject(preApplyFilters)){var t=function(){return e(this).val()===preApplyFilters[a]};for(var a in preApplyFilters){var n=e("#"+a);n.is("select")?n.find("option").filter(t).prop("selected",!0).closest("select"):n.is("input[type=checkbox]")&&n.closest(".CB").trigger("click")}e(".opener").trigger("click")}}).ready(function(){if("undefined"!=typeof preApplyMessage&&!e.isEmptyObject(preApplyMessage))for(var t in preApplyMessage)e("[value="+t+"]").trigger("click")}).ready(function(){"true"!==localStorage.getItem("cookiepolicy")&&e(".cookie-policy-message").show().find("#hide-cookie-message").click(function(){e(".cookie-policy-message").fadeOut(750),localStorage.setItem("cookiepolicy","true")})}).ready(function(){e("#main-nav-menu .menu-item-has-children").append('<div class="arrow"></div>'),e("#main-nav-menu .menu-item-has-children .arrow").click(function(){var t=e(this).parent(),a=e(this).siblings("a").text();t.siblings().fadeOut(0),e("#main-nav-menu .option-back .menu-header").text(a),e("#main-nav-menu .option-back").fadeIn(0),t.addClass("open")}),e("#main-nav-menu .option-back").click(function(){e(this).fadeOut(0);var t=e("#menu-mobile li");t.removeClass("open"),t.fadeIn(0)})}).ready(function(){for(var t=e("select"),a=0;a<t.length;a++)null!==e(t[a]).val()&&""!==e(t[a]).val()&&e(t[a]).addClass("changed")}).on("click","#btn-business",function(t){var a=window.location.href,n=e(this).hasClass("businessArea")?"false":"true";a+=a.indexOf("?")>-1?"&business="+n:"?business="+n,window.location.href=a}).on("change","#order-county",function(){var t=e(this),a=t.find("option:selected");if("7"===e(this).val()||"22"===e(this).val()||"23"===e(this).val()){e("#unallowed_counties").modal(),e(".modal-backdrop").appendTo("#order_step01"),e("body").removeClass(),e(this).find("option:first-child").attr("selected","selected");var n=a.text(),o={Kerry:["Killarney Oil","064 6632007"],Limerick:["Regional Oil","061 353248"],Longford:["Keegan Fuel","086 4492222"]};return e("#depotNameModal").text(n),e("#depotPartnerModal").text(o[n][0]),void e("#depotPhoneModal").html('<a style="color: inherit;" href="tel:'+o[n][1]+'">'+o[n][1]+"</a>")}v("#order_panel"),e(".green-spacer").addClass("large-spacer"),e('input[name="county_name"]').val(a.text()),m("#order-town",this.value)}).on("click","#search_on_content",function(){e(this).closest("ul").toggleClass("show-search").find("input").focus().select()}).ready(function(){null===e("#order-billing-county").val()&&e("#order-billing-county").removeClass("changed"),e("#order-billing-county").closest(".form-control-wrapper").removeClass("success error")}).on("change","select.form-control",function(){e(this).addClass("changed")}).on("change","#order-town",function(){var n=e(this),i=n.find("option:selected"),r=i.data("depotId"),l=i.data("depotName"),s=i.data("depotPhone"),d=[];e('input[name="town_name"]').val(i.text()),e('input[name="depot_name"]').val(l),e('input[name="depot_phone"]').val(s),e("#customer-town").text(n.val()),e.ajax({method:"post",dataType:"json",url:AjaxURL+"/get-products.php",data:{id:r}}).done(function(n){for(var i=[],l=0;l<n.length;l++)d.push(n[l].id),i.push("<option"+(2===o(n[l].id)?" selected":"")+' value="'+n[l].id+'">'+n[l].name+"</option>");e("#order-product").addClass("changed").html(i.join("")),e('input[name="depot_id"]').val(r),e.ajax({method:"post",dataType:"json",url:AjaxURL+"/get-price-matrix.php",data:{productIds:d,depotId:r}}).done(function(n){var o=e("#order-product").find("option:selected").val();t=n,a.data({valueMin:t[o][0].min,valueMax:t[o][t[o].length-1].max})})})}).on("change",".order-product-home",function(){var n=e(this).val();a.data({valueMin:t[n][0].min,valueMax:t[n][t[n].length-1].max})}).on("click","#toggle-promo",function(t){t.preventDefault(),e(".promo-box").toggleClass("hidden"),e(this).find("i").toggleClass("fa-plus-circle fa-minus-circle"),e("#order-promo").focus()}).on("click","#change-date",function(t){t.preventDefault(),e(".change-delivery-date").datepicker("show")}).on("click","#order_step01    .btn-validate",function(){return g()}).on("click","#orderForm_step2 .btn-validate",function(){return p("#orderForm_step2")}).on("click","#orderForm_step3 .btn-validate",function(){return p("#orderForm_step3")}).on("click","#orderForm_step4 .btn-validate",function(){return p("#orderForm_step4")}).on("click","#orderForm_step6 .btn-validate",function(){return u()}).on("keyup","#order-card-number",function(){e(".this-card").removeClass("this-card"),/^4/.test(e(this).val())?(e("#visa-icon").addClass("this-card"),e("#cardtype").val("VISA")):e(this).val().trim().length>0&&(e("#master-icon").addClass("this-card"),e("#cardtype").val("MASTERCARD"))}).on("change",'[name="paytype"]',function(){var t=e('[name="paytype"]:checked').val();e(".pay-by").hide(),"card"===t?e(".pay-by-card").show():e(".pay-by-pay-pal").show()}).on("change","#form-contact #filter-county",function(){m("#form-contact #filter-town",this.value),"7"===this.value||"22"===this.value||"23"===this.value?e("#filter-town").removeClass("to-validate").parent().parent().hide():e("#filter-town").addClass("to-validate").parent().parent().show(),e("#filter-town").parent().removeClass("error success")}).on("change","#depotsList #filter-county",function(){m("#depotsList #filter-town",this.value,y)}).on("change","#depotsList #filter-town",function(){n=[e(this).find("option:selected").data("depotId")],b()}).on("click",".scroll-top",function(t){t.preventDefault(),e("html, body").animate({scrollTop:"0px"})});var l=function(e){return 1===e.toString().length?"0"+e:e},s=[],d="",c=[];"undefined"!=typeof globalHolidays&&(s=globalHolidays),"undefined"!=typeof start&&(d=start),"undefined"!=typeof disabledDate&&(c=disabledDate),e(".change-delivery-date").datepicker({daysOfWeekDisabled:c,format:"DD dd MM yyyy",startDate:d,endDate:new Date(+new Date+12096e5),beforeShowDay:function(e){return e=e.getFullYear()+"-"+l(e.getMonth()+1)+"-"+l(e.getDate()),{enabled:s.indexOf(e)===-1}}}).on("changeDate",function(t){e("#planned-date").text(t.target.value),e(".change-delivery-date").datepicker("hide")});var p=function(t,a){var n=!0;return e(t+" .form-control-wrapper.error, "+t+" .form-control-wrapper.success").removeClass("error success"),e(t+" .to-validate:visible").each(function(t){h(e(this))||(n=!1)}),a&&!n?e(a).slideDown(200):e(a).slideUp(200),n},u=function(){var t=e(".set-reminder"),a=/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+(\.)+([a-zA-Z0-9]{2,63})+$/,n={name:t.find("input[name=fullname]").val(),town:t.find("input[name=town]").val(),county:t.find("input[name=county]").val(),remindEmail:t.find("input[name=remindEmail]").val(),remindDate:t.find("input[name=remindDate]").val(),depotId:t.find("input[name=depotId]").val(),depotName:t.find("input[name=depotName]").val()};return!a.test(n.remindEmail)||n.remindEmail.split("@").length>2?(console.log("email is not valid!"),t.find("input[name=remindEmail]").css("border-color","red"),!1):(t.find("input[name=remindEmail]").css("border-color","#b5b5b5"),void e.ajax({method:"post",dataType:"text",url:AjaxURL+"set-reminder.php",data:n}).done(function(e){t.find(".hideable-contents").html(e)}))},f=function(t){e(".price-overflow-message").html('<em></em>Order between<br class="visible-xs"> <span class="heavy">'+t.data("valueMin")+" - "+t.data("valueMax")+" Litres</span>").fadeIn()},h=function(t){var a=!0,n="success",i=t.parent();if(t.hasClass("to-validate")){if(t.val()&&t.val().trim()){if(t.data("type"))switch(t.data("type")){case"email":var r=/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+(\.)+([a-zA-Z0-9]{2,63})+$/;(!r.test(t.val())||t.val().split("@").length>2)&&(n="error",a=!1);break;case"number":var l=o(t.val());(l<o(t.data("valueMin"))||l>o(t.data("valueMax")))&&(n="error",a=!1);break;case"phoneMobile":t.val().length<8&&(n="error",a=!1)}}else n="error",a=!1;i.parent().hasClass("sideIcon")&&(i=i.parent()),i.removeClass("error success"),i.addClass(n),"order-amount"===t.attr("id")?"error"!==n?e(".price-overflow-message").fadeOut():f(t):"order-email"===t.attr("id")&&("error"!==n?e(t).next(".info").fadeOut():e(t).next(".info").fadeIn())}return a},m=function(t,a,n){"#order-town"===t&&(e(t).attr("disabled","disabled").removeClass("changed"),e("#town-loader").show()),e.ajax({method:"post",dataType:"json",url:AjaxURL+"/get-towns.php",data:{id:a}}).done(function(i){28===o(a)&&i.sort(function(e,t){var a=1*e.name.replace("Dublin ",""),n=1*t.name.replace("Dublin ","");return a=isNaN(a)?1e3:a,n=isNaN(n)?1e3:n,a<n?-1:a>n?1:0});for(var r=["<option disabled selected>Select your town</option>"],l=0;l<i.length;l++)r.push('<option value="'+i[l].id+'" data-depot-id="'+i[l].depotId+'" data-depot-name="'+i[l].depotName+'" data-depot-phone="'+i[l].depotPhone+'">'+i[l].name+"</option>");e(t).html(r.join("")),"function"==typeof n&&setTimeout(function(){n(a,i)},100),e(t).removeAttr("disabled").addClass("changed"),e("#town-loader").hide()})},v=function(t){e(t).addClass("chosen-county")},g=function(){return e("#order_panel").hasClass("chosen-county")?p("#order_step01"):(v("#order_panel"),!1)},y=function(e,t){n=[],t.forEach(function(e){n.push(parseInt(e.depotId,10))}),n=n.filter(function(e,t,a){return a.indexOf(e)===t}),b(e)},b=function(t){var a=e(".depot-info").css("display","none"),i=o(t);n.length?a.each(function(t,a){var o=e(a),i=parseInt(o.data("depotId"),10);n.indexOf(i)!==-1&&o.fadeIn(500)}):7===i?e(".special-depot").find("h1").text("Killarney Oil").end().find(".address").text("Contact our partner in Kerry").end().find(".phone").html('<i class="clicable fa fa-phone"></i><a style="color: inherit;" href="tel:064 6632007">064 6632007</a>').end().fadeIn(500):22===i?e(".special-depot").find("h1").text("Regional Oil").end().find(".address").text("Contact our partner in Limerick").end().find(".phone").html('<i class="clicable fa fa-phone"></i><a style="color: inherit;" href="tel:061 353248">061 353248</a>').end().fadeIn(500):23===i?e(".special-depot").find("h1").text("Keegan Fuel").end().find(".address").text("Contact our partner in Longford").end().find(".phone").html('<i class="clicable fa fa-phone"></i><a style="color: inherit;" href="tel:086 4492222.">086 4492222</a>').end().fadeIn(500):e(".no-depots").fadeIn(500)},k=e('[name="competition-chk"]'),x=e('[name="what-state"]');k.on("change",function(e){x.prop("checked",!1)}),x.on("change",function(t){e('[name="competition"]').val(k[0].checked&&"Nevada"===t.target.value?"Yes - Nevada":"No - "+t.target.value)})}(jQuery),function(e){var t=function(e,t){var a=window.dataLayer=window.dataLayer||[];a.push({event:e,value:t})};e(document).on("click",".apply-promo",function(){this.classList.contains("disabled")||t("Promocode",e("#order-promo").val())}).on("click",".get-quote-mail",function(){this.classList.contains("disabled")||t("Not_Ready_To_Order",e("#order-email-quote").val())}).on("change","#order-marketing",function(){t("Optin_Email",this.checked?"Yes":"No")}).on("change","#order-marketing-text",function(){t("Optin_SMS",this.checked?"Yes":"No")})}(jQuery);